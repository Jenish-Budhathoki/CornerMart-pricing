<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Item Price</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex items-center justify-center p-6">

  <div class="max-w-md w-full bg-white rounded-xl shadow-lg p-8 border border-blue-100">
    <h1 id="item-name" class="text-4xl font-semibold text-center text-blue-700 mb-8">
      Loading...
    </h1>

    <table class="w-full rounded-lg overflow-hidden text-lg" style="border-collapse: separate; border-spacing: 0 12px;">
      <thead>
        <tr class="bg-blue-100 text-blue-900">
          <th class="py-4 px-6 text-left rounded-tl-lg">Cash Price</th>
          <th class="py-4 px-6 text-left rounded-tr-lg">Card Price</th>
        </tr>
      </thead>
      <tbody>
        <tr class="bg-white shadow-md hover:shadow-lg transition-shadow duration-300">
          <td id="cash-price" class="py-5 px-6 text-center font-medium">Loading...</td>
          <td id="card-price" class="py-5 px-6 text-center font-medium">Loading...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script>
    // Get ?item= from the URL, fallback to "rice" if missing
    const urlParams = new URLSearchParams(window.location.search);
    const item = urlParams.get("item") || "rice";

    // Capitalize and update heading
    document.getElementById("item-name").textContent =
      item.charAt(0).toUpperCase() + item.slice(1);

    // Fetch prices from Google Apps Script
    fetch("https://script.google.com/macros/s/AKfycbxmIJjtYV84S7AsNLwySfDXp_7OOJc4HkDZN2oDpEvJBIXf5D-nhR22Mrpd-BCEtCXM/exec?item=" + item)
      .then(response => response.json())
      .then(data => {
        if (!data.error) {
          document.getElementById("cash-price").textContent = "$" + data.cash;
          document.getElementById("card-price").textContent = "$" + data.card;
        } else {
          document.getElementById("cash-price").textContent = "Not Found";
          document.getElementById("card-price").textContent = "Not Found";
        }
      })
      .catch(err => {
        console.error("Fetch error:", err);
        document.getElementById("cash-price").textContent = "Error";
        document.getElementById("card-price").textContent = "Error";
      });
  </script>

</body>
</html>
